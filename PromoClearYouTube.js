import{a0 as P,S as m,i as f,$ as R,_ as b,m as w}from"./general.js";import{r as h,i as g,d as S,h as A,u as d,o as B,c as E,a as _,t as L,p as T,_ as C}from"./i18n.js";const U="/clear-youtube-logo.svg",k="dashboard.html",v="tab",y="limits",Y="block.html",M="domain";function p(){const e=h(new URL(location.href)),a=g(()=>e.value.hostname=="hhfnghjdeddcfegfekjeihfmbjenlomm"&&e.value.pathname.includes(k)&&e.value.searchParams.get(v)==y),s=g(()=>{var t;return e.value.hostname=="hhfnghjdeddcfegfekjeihfmbjenlomm"&&e.value.pathname.includes(Y)&&((t=e.value.searchParams.get(M))==null?void 0:t.includes("youtube.com"))});function o(t){let l=P(t);const n=e.value.searchParams.get(v);if(window.history.replaceState&&n){const u=`tab=${n}`,i=`tab=${l}`;window.history.replaceState(location.href,document.title,location.href.replace(u,i)),e.value=new URL(location.href)}}return{isLimitPage:a,isBlockPage:s,updateTab:o}}async function I(){const e=f(),a=p(),s=await e.getValue(m.PROMO_CLEAR_YOUTUBE_ON_LIMITS),o=await e.getValue(m.PROMO_CLEAR_YOUTUBE_ON_BLOCK),t=Object.values(await e.getValue(m.RESTRICTION_LIST,[])),l=g(()=>t.find(i=>i.domain=="youtube.com")!=null),n=g(()=>(s==null||s==!1)&&a.isLimitPage.value&&l.value),u=g(()=>(o==null||o==!1)&&a.isBlockPage.value);return n.value||u.value}const j={key:0,class:"review-block"},x=["value"],N={name:"PromoClearYouTube"},V=S({...N,setup(e){const{t:a}=A(),s=f(),o=p(),t=h(!0),l=R(async()=>await I());async function n(){t.value=!1,await i()}async function u(){t.value=!1,window.open(w,"_blank"),await i()}async function i(){let r;o.isBlockPage.value&&(r=m.PROMO_CLEAR_YOUTUBE_ON_BLOCK),o.isLimitPage.value&&(r=m.PROMO_CLEAR_YOUTUBE_ON_LIMITS),r&&await s.saveValue(r,!0)}return(r,c)=>t.value&&d(l)?(B(),E("div",j,[c[2]||(c[2]=_("div",{class:"img-block"},[_("img",{src:U,height:"45"})],-1)),_("p",null,L(d(a)("promoClearYoutube.message")),1),_("input",{type:"button",value:d(a)("promoClearYoutube.description"),onClick:c[0]||(c[0]=O=>u())},null,8,x),_("img",{height:"15",src:b,onClick:c[1]||(c[1]=O=>n())})])):T("",!0)}});const D=C(V,[["__scopeId","data-v-6311855b"]]);export{D as P,U as _,p as u};
